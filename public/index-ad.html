<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
</head>

<body>
    <!-- Header Admin -->
    <div id="header-ad-placeholder"></div>

    <!-- Main Content Admin -->
    <div id="mainContent-ad-placeholder"></div>

    <!-- Footer (có thể dùng chung) -->
    <div id="footer-ad-placeholder"></div>

    <!-- Modal Placeholder -->
    <div id="auth-ad-placeholder"></div>



    <script>
    (async () => {
        const res = await fetch('http://127.0.0.1:3000/api/admin/check', {
            credentials: 'include'
        });

        if (!res.ok) {
            location.href = 'login.html';
        }
    })();
    </script>


    <!-- Load Components -->
    <script src="js/menu.js"></script>
    <script src="js/search.js"></script>
    <script src="js/productsFeed.js"></script>
    <script src="js/header.js"></script>

    <script>
        // Hàm load HTML component
        function loadHTML(elementId, file, callback) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(elementId).innerHTML = data;
                    if (callback) callback();
                })
                .catch(error => console.error(`Lỗi khi tải ${file}:`, error));
        }

        // Load các component admin
        loadHTML("header-ad-placeholder", "component/header-ad.html", () => {
            document.body.classList.add("has-fixed-header");
            if (window.initSearch) initSearch();
        });

        // loadHTML("footer-ad-placeholder", "component/footer.html");

        loadHTML("mainContent-ad-placeholder", "component/mainContent.html", () => {
            if (window.initProducts) window.initProducts();
        });
    </script>
</body>

</html>
