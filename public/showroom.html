<!doctype html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description"
        content="Hệ thống showroom TT - tìm địa chỉ cửa hàng, chính sách trả góp, bảo hành và liên hệ nhanh." />
    <title>WebTT - Showroom TT</title>
    <link rel="icon" type="image/png" href="Image_Showroom/Slogan_w_logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/s_showRoom.css">
    <script>
        window.addEventListener("scroll", function () {
            const header = document.querySelector("header.header");
            if (!header) return;
            if (window.scrollY > 10) header.classList.add("scrolled"); else header.classList.remove("scrolled");
        });
    </script>
</head>

<body class="has-fixed-header">
    <header class="header" role="banner">
        <div id="header-placeholder"></div>
    </header>
    <nav class="showroom-topnav" aria-label="Liên kết nhanh showroom">
        <a href="#" id="open-tra-gop"><i class='bx bx-credit-card' aria-hidden="true"></i> <span>Trả góp</span></a>
        <a href="#" id="open-bao-hanh"><i class='bx bx-shield' aria-hidden="true"></i> <span>Bảo hành</span></a>
        <a href="#" id="open-lien-he"><i class='bx bx-phone' aria-hidden="true"></i> <span>Liên hệ</span></a>
    </nav>
    <main id="main" class="showroom-main" tabindex="-1">
        <section class="sr-container main-container" id="store-locator" aria-labelledby="store-locator-title">
            <h1 id="store-locator-title" class="sr-title">Hệ thống cửa hàng TT</h1>
            <div id="region-tabs" class="sr-tabs" role="tablist" aria-label="Khu vực cửa hàng"></div>
            <div class="sr-tools">
                <div class="sr-search">
                    <label for="storeFilter" class="visually-hidden">Tìm kiếm cửa hàng</label>
                    <i class='bx bx-search' aria-hidden="true"></i>
                    <input id="storeFilter" type="text" placeholder="Tìm cửa hàng theo tên, địa chỉ..."
                        autocomplete="off" aria-describedby="storeFilterHelp" />
                </div>
                <p id="storeFilterHelp" class="visually-hidden">Nhập một phần tên hoặc địa chỉ để lọc cửa hàng.</p>
            </div>
            <div class="sr-content">
                <div id="store-grid" class="store-grid" aria-live="polite" aria-busy="true">
                    <p class="store-grid-status">Đang tải danh sách cửa hàng...</p>
                </div>
                <aside class="store-map" id="store-map" aria-label="Bản đồ cửa hàng" hidden>
                    <iframe id="mapFrame" loading="lazy" title="Bản đồ vị trí cửa hàng"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>
                </aside>
            </div>
        </section>
    </main>
    <footer class="footer" role="contentinfo">
        <div id="footer-container"></div>
    </footer>
    <div id="popup-modal" class="modal-backdrop" aria-hidden="true">
        <div id="popup-content" class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="popup-title">
            <button id="close-popup" class="modal-close-btn" type="button" aria-label="Đóng popup">&times;</button>
        </div>
    </div>
    <script>
        const ctaBtn = document.querySelector(".cta-btn");
        if (ctaBtn) ctaBtn.onclick = function () { document.getElementById("store-locator").scrollIntoView({ behavior: "smooth" }); };
        async function loadPagePart(url, containerId, callback = null) {
            try {
                const response = await fetch(url);
                const html = await response.text();
                const container = document.getElementById(containerId);
                container.innerHTML = html;
                const tempDiv = document.createElement("div");
                tempDiv.innerHTML = html;
                const scripts = tempDiv.querySelectorAll("script");
                scripts.forEach((oldScript) => {
                    const src = oldScript.src;
                    if (src && document.querySelector(`script[src="${src}"]`)) return;
                    const newScript = document.createElement("script");
                    if (src) { newScript.src = src; newScript.defer = true; } else { newScript.textContent = oldScript.textContent; }
                    document.body.appendChild(newScript);
                });
                if (typeof callback === "function") callback();
            } catch (error) { console.error(`Lỗi khi tải ${url}:`, error); }
        }
        loadPagePart("component/header.html", "header-placeholder");
        loadPagePart("component/footer.html", "footer-container");
        const popupModal = document.getElementById("popup-modal");
        const popupContent = document.getElementById("popup-content");
        const closePopupBtn = document.getElementById("close-popup");
        function showPopup(type) {
            let html = "";
            if (type === "tra-gop") {
                html = `<h2 id="popup-title" style="margin-top:0;">Chính sách trả góp tại TT</h2><ul style="line-height:1.7;margin:0 0 16px 0;padding-left:20px;">\n<li>Áp dụng cho sản phẩm từ 3 triệu đồng trở lên.</li><li>Trả trước từ 10% giá trị sản phẩm.</li><li>Kỳ hạn linh hoạt: 3, 6, 9, 12 tháng.</li><li>Thủ tục: CMND/CCCD và bằng lái xe/hộ khẩu.</li><li>Hỗ trợ qua thẻ tín dụng hoặc công ty tài chính.</li><li>Xét duyệt nhanh, nhận máy ngay.</li><li>Không áp dụng đồng thời với khuyến mãi khác.</li></ul><p style="margin:0;">Liên hệ hotline hoặc đến showroom để được tư vấn chi tiết.</p>`;
            } else if (type === "bao-hanh") {
                html = `<h2 id="popup-title" style="margin-top:0;">Chính sách bảo hành tại TT</h2><ul style="line-height:1.7;margin:0 0 16px 0;padding-left:20px;">\n<li>Bảo hành chính hãng theo quy định của nhà sản xuất.</li><li>Thời gian bảo hành: 12-24 tháng tùy sản phẩm.</li><li>Đổi mới trong 7 ngày nếu lỗi do nhà sản xuất.</li><li>Giữ hóa đơn và hộp sản phẩm để được bảo hành.</li><li>Hỗ trợ bảo hành nhanh tại tất cả showroom 3TD.</li></ul><p style="margin:0;">Liên hệ hotline hoặc đến showroom để được hỗ trợ bảo hành.</p>`;
            } else if (type === "lien-he") {
                html = `<h2 id="popup-title" style="margin-top:0;">Liên hệ TT</h2><p><strong>Địa chỉ:</strong> 78-80-82 Hoàng Hoa Thám, P.12, Q.Tân Bình, TP.HCM</p><p><strong>Hotline:</strong> 1900 200641</p><p><strong>Email:</strong> info@3td.vn</p><p><strong>Fanpage:</strong> <a href="https://facebook.com/3td.vn" target="_blank" rel="noopener">facebook.com/3td.vn</a></p>`;
            }
            popupContent.querySelectorAll(':scope > :not(.modal-close-btn)').forEach(el => el.remove());
            popupContent.insertAdjacentHTML('beforeend', html);
            popupModal.style.display = 'flex';
            popupModal.setAttribute('aria-hidden', 'false');
        }
        const btnTraGop = document.getElementById("open-tra-gop");
        const btnBaoHanh = document.getElementById("open-bao-hanh");
        const btnLienHe = document.getElementById("open-lien-he");
        if (btnTraGop) btnTraGop.onclick = e => { e.preventDefault(); showPopup('tra-gop'); };
        if (btnBaoHanh) btnBaoHanh.onclick = e => { e.preventDefault(); showPopup('bao-hanh'); };
        if (btnLienHe) btnLienHe.onclick = e => { e.preventDefault(); showPopup('lien-he'); };
        popupModal.onclick = e => { if (e.target === popupModal) { popupModal.style.display = 'none'; popupModal.setAttribute('aria-hidden', 'true'); } };
        closePopupBtn.onclick = () => { popupModal.style.display = 'none'; popupModal.setAttribute('aria-hidden', 'true'); };
    </script>
    <script src="js/menu.js" defer></script>
    <script src="js/search.js" defer></script>
    <script src="js/showroom.js" defer></script>
</body>

</html>